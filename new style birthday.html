<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>For my forever love ‚ù§Ô∏è</title>

  <!-- Tailwind + Google Fonts -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Cinzel:wght@700&family=Baloo+2:wght@400;700&display=swap" rel="stylesheet">

  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      background: linear-gradient(145deg, #fff0f5 0%, #ffe4ec 50%, #ffe0f0 100%);
      font-family: 'Baloo 2', cursive;
      color: #2d1b2e;
      overflow-x: hidden;
      min-height: 100vh;
    }

    /* cinematic soft bars */
    .bar {
      position: fixed;
      left: 0;
      width: 100%;
      height: 4vh;
      background: rgba(255, 200, 220, 0.25);
      backdrop-filter: blur(2px);
      z-index: 40;
      pointer-events: none;
    }
    .top-bar { top: 0; }
    .bottom-bar { bottom: 0; }

    /* floating hearts */
    .float-heart {
      position: fixed;
      bottom: -10px;
      font-size: clamp(18px, 5vw, 35px);
      opacity: 0.8;
      animation: rise 7s linear infinite;
      z-index: 30;
      pointer-events: none;
      filter: drop-shadow(0 0 8px #ffb6c1);
    }
    @keyframes rise {
      0% { transform: translateY(0) scale(1); opacity: 0.9; }
      100% { transform: translateY(-120vh) scale(1.6); opacity: 0; }
    }

    /* countdown */
    #countdown {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: clamp(80px, 25vw, 200px);
      font-family: 'Cinzel', serif;
      color: #b34180;
      text-shadow: 0 0 40px #ffb6c1, 0 0 20px #fff;
      z-index: 100;
      transition: opacity 0.5s;
    }

    /* main hidden at start */
    #main {
      opacity: 0;
      transition: opacity 1.5s ease;
    }
    #main.show {
      opacity: 1;
    }

    /* ===== PERFECT CIRCLE PHOTO FRAME - FULL PHOTO VISIBLE ===== */
    .photo-frame {
      width: 100%;
      max-width: min(450px, 80vw);  /* Responsive max size */
      margin-left: auto;
      margin-right: auto;
      aspect-ratio: 1 / 1;
      border-radius: 50%;
      box-shadow: 0 20px 40px -8px rgba(180, 60, 100, 0.5), 0 0 0 5px rgba(255, 255, 255, 0.9);
      background: white;
      position: relative;
      transition: box-shadow 0.4s, transform 0.3s;
      border: 4px solid white;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: visible;  /* Changed from hidden to visible */
    }

    .photo-frame:hover {
      transform: scale(1.02);
      box-shadow: 0 30px 60px -5px rgba(200, 80, 120, 0.7);
    }

    .photo-frame img {
      width: 100%;
      height: 100%;
      object-fit: contain;  /* Changed from cover to contain - shows FULL image */
      transition: opacity 0.7s ease, transform 0.5s ease;
      display: block;
      will-change: transform, opacity;
      border-radius: 50%;
      background: #ffeef5;  /* Background color in case of transparent areas */
    }

    /* subtle zoom for active photo */
    .photo-frame img.active {
      transform: scale(1.05);
    }

    /* nav buttons ‚Äì perfectly positioned */
    .nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      color: #b34180;
      border: none;
      width: clamp(35px, 8vw, 45px);
      height: clamp(35px, 8vw, 45px);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(20px, 5vw, 24px);
      box-shadow: 0 6px 18px rgba(255, 150, 180, 0.6);
      cursor: pointer;
      transition: 0.25s;
      z-index: 20;
      border: 2px solid white;
    }
    .nav-btn:hover {
      background: white;
      transform: translateY(-50%) scale(1.15);
      box-shadow: 0 10px 28px #ff85a5;
    }
    .nav-btn.left { left: 0; }
    .nav-btn.right { right: 0; }

    /* proposal popup */
    #proposal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(12px);
      color: #b33b6b;
      padding: clamp(20px, 6vw, 40px);
      border-radius: clamp(30px, 8vw, 48px);
      text-align: center;
      box-shadow: 0 40px 70px #ffb6c1;
      transition: 0.45s cubic-bezier(0.34, 1.56, 0.64, 1);
      z-index: 200;
      width: 90%;
      max-width: 460px;
      border: 3px solid white;
    }
    #proposal.show {
      transform: translate(-50%, -50%) scale(1);
    }

    /* rose petal */
    .petal {
      position: fixed;
      top: -20px;
      font-size: clamp(18px, 5vw, 24px);
      filter: drop-shadow(0 0 6px #ff9eb5);
      animation: petalFall linear forwards;
      z-index: 25;
      pointer-events: none;
    }
    @keyframes petalFall {
      0% { transform: translateY(0) rotate(0deg); opacity: 0.9; }
      100% { transform: translateY(110vh) rotate(420deg); opacity: 0; }
    }

    /* typewriter text space */
    #message {
      word-break: break-word;
      white-space: pre-wrap;
    }

    /* content card - glass morphism */
    .content-card {
      background: rgba(255, 250, 250, 0.9);
      backdrop-filter: blur(8px);
      border-radius: clamp(30px, 8vw, 60px) clamp(30px, 8vw, 60px) clamp(25px, 6vw, 40px) clamp(25px, 6vw, 40px);
      border: 1px solid rgba(255, 255, 255, 0.8);
      box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15);
    }

    /* photo counter */
    .photo-counter {
      display: inline-block;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(5px);
      padding: 5px 15px;
      border-radius: 50px;
      color: #b34180;
      font-weight: bold;
      margin-top: 15px;
      font-size: clamp(14px, 3.5vw, 16px);
      border: 1px solid white;
      box-shadow: 0 4px 10px rgba(255, 150, 180, 0.2);
    }

    /* responsive text adjustments */
    .responsive-text {
      font-size: clamp(16px, 4vw, 20px);
    }

    /* ensure images load properly */
    img {
      max-width: 100%;
      height: auto;
    }
  </style>
</head>
<body class="flex items-center justify-center p-3 sm:p-4 md:p-5">

  <!-- soft cinematic bars -->
  <div class="bar top-bar"></div>
  <div class="bar bottom-bar"></div>

  <!-- countdown centerpiece -->
  <div id="countdown">5</div>

  <!-- MAIN LUXURY CONTENT - FULLY RESPONSIVE -->
  <div id="main" class="w-full max-w-6xl mx-auto hidden flex-col items-center justify-center min-h-screen py-6 px-3 sm:px-4 md:px-6 text-center">

    <h1 class="font-[Pacifico] text-[clamp(32px,8vw,70px)] leading-tight text-[#a53f6c] drop-shadow-lg mb-4 sm:mb-6 md:mb-8">
      Happy Birthday<br class="sm:hidden"> My Queen ‚ù§Ô∏è
    </h1>

    <!-- premium glass card - fully responsive padding -->
    <div class="content-card w-full p-4 sm:p-6 md:p-8 shadow-2xl">

      <!-- PHOTO SLIDESHOW - PERFECT CIRCLE WITH FULL PHOTO VISIBLE -->
      <div class="relative flex flex-col items-center">
        <div class="photo-frame">
          <img id="slide" class="active" src="pic1.jpeg" alt="memory photo" onerror="this.src='https://placehold.co/400x400/ff9eb5/ffffff?text=‚ù§Ô∏è'">

          <!-- Navigation buttons - perfectly positioned for circle -->
          <div class="nav-btn left" onclick="prevPhoto()" aria-label="previous photo">‚Üê</div>
          <div class="nav-btn right" onclick="nextPhoto()" aria-label="next photo">‚Üí</div>
        </div>
        
        <!-- photo counter - shows current photo number -->
        <div id="photo-counter" class="photo-counter">1/4 üíù</div>
      </div>

      <!-- name typed - responsive text -->
      <h2 id="typed" class="text-pink-700 font-bold mb-2 sm:mb-3 text-[clamp(20px,5vw,32px)]"></h2>

      <!-- love message - fully responsive with proper line height -->
      <div id="message" class="text-[#3a2a33] text-[clamp(15px,3.8vw,19px)] leading-relaxed max-w-2xl mx-auto px-2 sm:px-4"></div>

      <!-- celebrate button - responsive sizing -->
      <button id="celebrate"
        class="mt-6 sm:mt-7 md:mt-8 bg-[#ff85a5] hover:bg-[#ff6b8b] text-white text-[clamp(18px,5vw,24px)] px-6 sm:px-8 md:px-10 py-2 sm:py-2.5 md:py-3 rounded-full shadow-xl transition-all transform hover:scale-105 active:scale-100 border border-white/30">
        Celebrate ‚ù§Ô∏è
      </button>

    </div>
  </div>

  <!-- proposal popup - fully responsive -->
  <div id="proposal">
    <h2 class="text-[clamp(22px,6vw,36px)] mb-3 sm:mb-4 md:mb-5 font-bold">Will you be mine forever? üíç‚ù§Ô∏è</h2>
    <button onclick="closeProposal()" class="bg-[#ff85a5] hover:bg-[#ff6b8b] text-white px-6 sm:px-8 md:px-10 py-2 sm:py-3 md:py-4 rounded-full text-[clamp(18px,5vw,24px)] shadow-xl transition">
      Yes, forever üíñ
    </button>
  </div>

  <!-- gentle background music -->
  <audio id="music" loop preload="auto">
    <source src="https://cdn.pixabay.com/download/audio/2023/08/21/audio_4d33e1e1b7.mp3?filename=romantic-piano-melody-181840.mp3" type="audio/mp3">
  </audio>

  <!-- confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <script>
    (function() {
      "use strict";

      /* ========================================================
         ‚ù§Ô∏è  EASY PHOTO UPDATE ‚Äì REPLACE WITH YOUR IMAGES
         ====================================================== */
      const photos = [
        "pic1.jpeg",  // Replace with your photo 1
        "pic2.jpeg",  // Replace with your photo 2  
        "pic3.jpeg",  // Replace with your photo 3
        "pic4.jpeg"   // Replace with your photo 4
      ];
      /* ====================================================== */

      // DOM elements
      const cdEl = document.getElementById('countdown');
      const mainEl = document.getElementById('main');
      const music = document.getElementById('music');
      const imgEl = document.getElementById('slide');
      const typedEl = document.getElementById('typed');
      const msgEl = document.getElementById('message');
      const celebrateBtn = document.getElementById('celebrate');
      const proposalEl = document.getElementById('proposal');
      const counterEl = document.getElementById('photo-counter');

      let currentIndex = 0;
      let autoTimer = null;

      // Update counter display
      function updateCounter() {
        if (counterEl) {
          counterEl.textContent = `${currentIndex + 1}/${photos.length} üíù`;
        }
      }

      // ---- show photo with smooth transition ----
      function showPhoto(index) {
        if (!imgEl) return;
        
        // Fade out
        imgEl.style.opacity = '0';
        imgEl.classList.remove('active');

        setTimeout(() => {
          // Set new photo source
          imgEl.src = photos[index];
          
          // Handle image load
          imgEl.onload = function() {
            imgEl.style.opacity = '1';
            imgEl.classList.add('active');
          };
          
          // Fallback if image fails to load
          imgEl.onerror = function() {
            imgEl.src = 'https://placehold.co/400x400/ff9eb5/ffffff?text=‚ù§Ô∏è';
            imgEl.style.opacity = '1';
            imgEl.classList.add('active');
          };
          
          updateCounter();
        }, 350);
      }

      window.nextPhoto = function() {
        currentIndex = (currentIndex + 1) % photos.length;
        showPhoto(currentIndex);
        resetAutoSlide();
      };

      window.prevPhoto = function() {
        currentIndex = (currentIndex - 1 + photos.length) % photos.length;
        showPhoto(currentIndex);
        resetAutoSlide();
      };

      function resetAutoSlide() {
        if (autoTimer) clearInterval(autoTimer);
        autoTimer = setInterval(() => {
          currentIndex = (currentIndex + 1) % photos.length;
          showPhoto(currentIndex);
        }, 5000);
      }

      // ---- mobile swipe support ----
      if (imgEl) {
        let touchStartX = 0;
        let touchStartY = 0;
        
        imgEl.addEventListener('touchstart', (e) => {
          touchStartX = e.changedTouches[0].clientX;
          touchStartY = e.changedTouches[0].clientY;
        }, { passive: true });
        
        imgEl.addEventListener('touchend', (e) => {
          const touchEndX = e.changedTouches[0].clientX;
          const touchEndY = e.changedTouches[0].clientY;
          const diffX = touchStartX - touchEndX;
          const diffY = touchStartY - touchEndY;
          
          // Only trigger if horizontal swipe is greater than vertical
          if (Math.abs(diffX) > Math.abs(diffY) && Math.abs(diffX) > 40) {
            if (diffX > 0) nextPhoto();
            else prevPhoto();
          }
        });
      }

      // ---- floating hearts ----
      function createFloatingHeart() {
        const heart = document.createElement('div');
        heart.className = 'float-heart';
        heart.innerHTML = ['üíñ','üíó','üíò','üíï','‚ù§Ô∏è','üíì'][Math.floor(Math.random() * 6)];
        heart.style.left = Math.random() * 100 + '%';
        heart.style.animationDuration = (Math.random() * 5 + 5) + 's';
        heart.style.fontSize = (Math.random() * 25 + 18) + 'px';
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 10000);
      }

      // ---- rose petals ----
      function createPetal() {
        const petal = document.createElement('div');
        petal.className = 'petal';
        petal.innerHTML = 'üåπ';
        petal.style.left = Math.random() * 100 + '%';
        petal.style.animationDuration = (Math.random() * 4 + 5) + 's';
        petal.style.fontSize = (Math.random() * 16 + 16) + 'px';
        document.body.appendChild(petal);
        setTimeout(() => petal.remove(), 9000);
      }

      // ---- start experience ----
      function startExperience() {
        // Start floating elements
        setInterval(createFloatingHeart, 700);
        setInterval(createPetal, 1400);

        // Typewriter effects
        typeWriter("To my beautiful love ‚ù§Ô∏è", typedEl, 70);
        typeMessage();

        // Show proposal after delay
        setTimeout(() => {
          proposalEl.classList.add('show');
        }, 16000);

        // Start auto slideshow
        resetAutoSlide();
        updateCounter();
      }

      // typewriter for name
      function typeWriter(text, element, speed) {
        if (!element) return;
        let i = 0;
        element.textContent = '';
        function write() {
          if (i < text.length) {
            element.textContent += text.charAt(i);
            i++;
            setTimeout(write, speed);
          }
        }
        write();
      }

      // typewriter for message
      function typeMessage() {
        const longMsg = "The world became brighter the day you were born. You are my forever, my always, my everything. Every moment with you is a dream, and I never want to wake up.";
        let i = 0;
        msgEl.textContent = '';
        function write() {
          if (i < longMsg.length) {
            msgEl.textContent += longMsg.charAt(i);
            i++;
            setTimeout(write, 42);
          }
        }
        write();
      }

      // ---- countdown ----
      let count = 5;
      const timer = setInterval(() => {
        count--;
        if (cdEl) cdEl.textContent = count;

        if (count === 0) {
          clearInterval(timer);
          if (cdEl) cdEl.style.display = 'none';
          mainEl.classList.remove('hidden');
          mainEl.classList.add('show', 'flex');
          music.play().catch(e => {
            // Auto-play was blocked, add click listener
            document.addEventListener('click', function musicFallback() {
              music.play();
              document.removeEventListener('click', musicFallback);
            }, { once: true });
          });
          startExperience();
        }
      }, 1000);

      // ---- fireworks ----
      celebrateBtn.addEventListener('click', () => {
        for (let i = 0; i < 6; i++) {
          setTimeout(() => {
            confetti({
              particleCount: 150,
              spread: 90,
              origin: { x: Math.random(), y: Math.random() * 0.5 },
              colors: ['#ffb6c1', '#ff9eb5', '#ff85a5', '#ff6b8b', '#fba0b3', '#ff8da1']
            });
          }, i * 150);
        }
      });

      // ---- close proposal ----
      window.closeProposal = function() {
        proposalEl.classList.remove('show');
        confetti({ 
          particleCount: 300, 
          spread: 120, 
          origin: { y: 0.5 },
          colors: ['#ffb6c1', '#ff9eb5', '#ff85a5', '#ff6b8b']
        });
      };

      // ---- sparkle cursor (disabled on mobile for performance) ----
      if (window.innerWidth > 768) {
        document.addEventListener('mousemove', (e) => {
          const spark = document.createElement('div');
          spark.textContent = '‚ú®';
          spark.style.position = 'fixed';
          spark.style.left = e.pageX + 'px';
          spark.style.top = e.pageY + 'px';
          spark.style.fontSize = '20px';
          spark.style.pointerEvents = 'none';
          spark.style.opacity = '0.5';
          spark.style.filter = 'drop-shadow(0 0 5px #ffa5c3)';
          spark.style.zIndex = '9999';
          spark.style.animation = 'fade 0.8s linear forwards';
          document.body.appendChild(spark);
          setTimeout(() => spark.remove(), 800);
        });
      }

      // fade style for spark
      const style = document.createElement('style');
      style.innerHTML = `@keyframes fade{0%{opacity:0.6;}100%{opacity:0;transform:scale(2);}}`;
      document.head.appendChild(style);

      // initial image with error handling
      if (photos.length > 0 && imgEl) {
        imgEl.src = photos[0];
        imgEl.onerror = function() {
          this.src = 'https://placehold.co/400x400/ff9eb5/ffffff?text=‚ù§Ô∏è';
        };
      }

    })();
  </script>

  <style>
    .hidden { display: none !important; }
    .flex { display: flex; }
  </style>

</body>
</html>